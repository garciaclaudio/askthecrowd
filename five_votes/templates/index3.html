{% load i18n %}
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html> 
    <head>
		<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
		<title>{% trans "Five Votes" %}</title>
		<script type="text/javascript" src="js/jquery-1.3.2.min.js"></script>
		<script type="text/javascript" src="js/jquery-ui-1.7.2.custom.min.js"></script>
                <script type="text/javascript" src="js/jquery.form.js"></script>
                <script type="text/javascript" src="js/jquery.tmpl.js"></script>
                <script type="text/javascript" src="js/fileuploader.js"></script>
                <link href="css/fileuploader.css" rel="stylesheet" type="text/css">
                <link href="css/start/jquery-ui-1.7.2.custom.css" rel="stylesheet" type="text/css">

<style type="text/css">

body {
    background-color: #FFFFFF;
    font: medium/1.2 Arial,Helvetica,sans-serif;
    margin: 0;
    padding: 0;
}

.delete_answer_div {
  position:absolute;top:2px;right:7px;"
}


div.centered_container {top: 0; left: 0; width: 100%; height: 100%; display: table}

p.centered_paragraph {display: table-cell; vertical-align: middle; text-align:center;}

#app_logo {
    width:100%;
    display:table;
    background-color:#9dee1d;
/*    text-align: center; */
    text-align: left;
    color:black;
    font-size: 120%;
/*    font-weight: bold; */
    margin-left:auto; 
    margin-right:auto; 
   -moz-border-radius: 12px;
   -webkit-border-radius: 12px;
    border-radius: 12px;
}


#super_top_container {
    text-align: center;
    width:100%;
}

#top_container {
   margin: 0px auto;
/*   padding: 10px; */
}

#main_container {
    width:100%;
    padding:0px;
    display:table;
    background-color: yellow;
    text-align: center;
    margin-left:auto; 
    margin-right:auto; 
   -moz-border-radius: 12px;
   -webkit-border-radius: 12px;
    border-radius: 12px;
}

.question_text {
    padding:10px;
    display:table;
    background-color:white;
    color:black;
    text-align: center;
    font-size: 150%;
    font-weight: bold;
    margin-left:auto; 
    margin-right:auto; 
   -moz-border-radius: 12px;
   -webkit-border-radius: 12px;
    border-radius: 12px;
}

.answer_text {
  font-size: 95%;
  font-weight:bold;
}

.answer_card {
  position: relative; 
  float: left;
  width: 140px;
  height: 160px;
  margin: 4px;
  background-color: white;
  padding: 10px;
  -moz-border-radius: 8px;
  -webkit-border-radius: 8px;
  border-radius: 8px;
}

.card_inset {
  text-align: center;
  width:140px;
  height:160px;
  display:table-cell;
  vertical-align:middle;
}


.answer_picture {
	border: 2px solid #000000;
}

.my_button, button.my_button {
	/* layout */
	padding: .3em .9em;
	/* text */
	font-size: 1em;
	/* color */
	background-color: #0896FF;
	color: #FFF;
	/* border and roundedness */
#	border: 4px solid #fff;
	-moz-border-radius: 12px;
	-webkit-border-radius: 12px;
	border-radius: 12px;
	/* shadow */
	-moz-box-shadow: 1px 1px 2px #999;
	-webkit-box-shadow: 1px 1px 2px #999;
	box-shadow: 1px 1px 2px #999;
	filter: progid:DXImageTransform.Microsoft.Shadow(color='#999999', direction='120', strength='2');
	-moz-background-clip: padding;
	-webkit-background-clip: padding-box;
	background-clip: padding-box;
        font-weight:bold;
}

.my_button:hover, button.my_button:hover, button.my_button_hover {
	background-color: #003580;
	cursor: pointer;
	-webkit-transition: all 0.1s ease-in-out;
	-moz-transition: all 0.1s ease-in-out;
	-o-transition: all 0.1s ease-in-out;
}

#add_ans_link {
   font-size: 80%;
   float:right;
}

.vote_link {
  font-size: 0.8em;
}

.vote_link A:link {color:#0000FF; text-decoration:none;}      /* unvisited link */
.vote_link A:visited {color:#0000FF;}  /* visited link */
.vote_link A:hover {text-decoration:underline;}  /* mouse over link */


.question_link {
  font-size: 1.2em;
}

.question_link A:link {color:#0000FF;text-decoration:none;}      /* unvisited link */
.question_link A:visited {color:#0000FF;text-decoration:none;}  /* visited link */
.question_link A:hover {text-decoration:underline;}  /* mouse over link */


.minus_vote_div {
  display:none;
  position:absolute;bottom:7px;left:15px;"
}

.plus_vote_div {
  position:absolute;bottom:7px;right:15px;"
}

.count_inset {
  display:none;
  padding:5px;
  -moz-border-radius: 8px;
  -webkit-border-radius: 8px;
  border-radius: 8px;
  position:absolute;top:12px;right:12px;"
  display:table-cell;
  width:35px;
  height:35px;
  background-color: #00FF00;
  font-size: 20px;
  font-weight:bold;
}

.count_text {
  color: white;
  margin-top:6px;
}

.voted_answer {
   background-color:#c5f982;
}


.results_card {
  position: relative; 
  float: left;
  width: 450px;
  height: 63px;
  margin: 4px;
  background-color: white;
  padding: 10px;
  -moz-border-radius: 8px;
  -webkit-border-radius: 8px;
  border-radius: 8px;
  clear:both;
}

.results_count_text {
  color: #00FF00;
  position:absolute;top:29px;right:17px;
  font-size: 25px;
  font-weight:bold;
}

.results_text {
  color: black;
  float:left;
  font-weight:bold;
  font-size: 22px;
  line-height:55px;
  margin: 5px;
}


.results_pic {
  float:left;
  margin: 5px;
}

#selector_div {
    padding:10px;
    display:table;
    background-color: yellow;
    text-align: center;
    margin-left:auto; 
    margin-right:auto; 
}

.result_selector {
  position: relative; 
  float: left;
  margin:2px;
  padding:10px;
  background-color:#a2f1ff;
  color:black;
  text-align: center;
  font-size: 80%;
  -moz-border-radius: 12px;
  -webkit-border-radius: 12px;
   border-radius: 12px;
}

.selected_result {
  background-color:#ffa7be;
    font-weight: bold;
}

#result_answers_div {
    padding:0px;
    display:table;
    text-align: center;
    margin-left:auto; 
    margin-right:auto; 
}


.hidden {
  display:none;
}
.visible {
  display:inline;
}


#contentwrapper{
float: left;
width: 100%;
}

#contentcolumn{
margin-right: 305px; /*Set right margin to RightColumnWidth*/
}

#rightcolumn{
float: left;
width: 300px; /*Width of right column in pixels*/
margin-left: -300px; /*Set left margin to -(RightColumnWidth) */
}

#footer{
    clear: left;
    width:100%;
    display:table;
    background-color:#9dee1d;
/*    text-align: center; */
    text-align: right;
    color:black;
    font-size: 0.8em;
/*    font-weight: bold; */
    margin-left:auto; 
    margin-right:auto; 
   -moz-border-radius: 12px;
   -webkit-border-radius: 12px;
    border-radius: 12px;
}

#footer a{
  font-size: 1.6em;
}

.innertube{
margin: 5px; /*Margins for inner DIV inside each column (to provide padding)*/
margin-top: 0px;
}

.toptube{
margin-top: 5px;
}

.mytube{
margin: 7px; /*Margins for inner DIV inside each column (to provide padding)*/
}


#right_col {
    width:100%;
    display:table;
    background-color:#9dee1d;
/*    text-align: center; */
    text-align: right;
    color:black;
    font-size: 120%;
/*    font-weight: bold; */
    margin-left:auto; 
    margin-right:auto; 
   -moz-border-radius: 12px;
   -webkit-border-radius: 12px;
    border-radius: 12px;
}

#maincontainer {
/*    margin-left:auto; 
    margin-right:auto; 
   width:96%; */
}

.tiny {
  text-align:left;
  font-size: 0.6em;
}

.prev_question_class {
    position: relative; 
    width:100%;
    padding:0px;
    display:table;
    background-color: #7cffc3;
    text-align: left;
    margin-top: 5px;
    margin-left:auto; 
    margin-right:auto; 
   -moz-border-radius: 12px;
   -webkit-border-radius: 12px;
    border-radius: 12px;
}

.invisible {
  display:none;
}


.prev_questions_count_inset {
  position:absolute;top:0px;right:20px;
  margin-top: 8px;
  padding:3px;
  -moz-border-radius: 8px;
  -webkit-border-radius: 8px;
  border-radius: 8px;
  height:35px;
  background-color: #00FF00;
  font-size: 20px;
  font-weight:bold;
}


</style>

<script type="text/javascript">
/*** Temporary text filler function. Remove when deploying template. ***/
var gibberish=["This is just some filler text", "Welcome to Dynamic Drive CSS Library", "Demo content nothing to read here"]
function filltext(words){
for (var i=0; i<words; i++)
document.write(gibberish[Math.floor(Math.random()*3)]+" ")
}
</script>


    </head>
<body>

{% include "control.inc" %}


<div id="maincontainer">

<div class="innertube toptube">
<div id="app_logo"><div class="mytube">{% trans "Five Votes" %}</div>
</div>
</div>

<div id="contentwrapper">
<div id="contentcolumn">
  <div id="super_top_container" class="innertube">
    <div id="top_container" >
      <div id="main_container">
      </div> <!-- main container -->
      <div id="prev_questions">
      </div> <!-- prev_questions -->
    </div> <!-- top_container -->
  </div> <!-- super_top_container -->
</div>
</div> <!-- contentwrapper -->

<div id="rightcolumn">
<div class="innertube">

<div id="right_col">
     <div class="mytube">
         <div style="text-align:left;" id="faces_div"></div>
         <p class="tiny">{% trans "Questions about this app? Leave them here:"%}</p>
         <div class="fb-comments" data-href="http://five-votes.appspot.com" data-num-posts="4" data-width="270"></div>
     </div>
</div>

</div>
</div>

<div class="innertube">
  <div id="footer">
    <div class="mytube">

      <div class="vote_link" style="float:left;margin-top:8px;">
        <a href="http://apps.facebook.com/five_votes/all">{% trans "Questions from other users" %}</a>
      </div>


<div style="float:right;margin-top:5px;margin-bottom:10px;">
<form action="/" method="get">
    <select name="lang" onChange="submit()">
          <option value="en" {% if language_en %}selected="selected"{% endif %}>{% lang2name "en" %}
</option>
          <option value="es" {% if language_es %}selected="selected"{% endif %}>{% lang2name "es" %}</option>
    </select>
</form>
</div>
<div style="float:right;margin-top:9px;">{% trans "Select your language" %}:&nbsp;</div>

    </div>
  </div>
</div>


</div> <!--maincontainer -->



<p>Locale: {{locale}}</p>
<p>IN DEV SERVER: {{IN_DEV_SERVER}}</p>
<p>NOT IN DEV SERVER: {{NOT_IN_DEV_SERVER}}</p>

{% if IN_DEV_SERVER %}
<h1>IN DEV</h1>
{% endif %}

<!-- JS TEMPLATES START -->

<script id="logged_in_faces_tmpl">
<fb:login-button show-faces="true"></fb:login-button>
</script>

<script id="welcome_msg_tmpl">
<div class="mytube">
<div id="welcome_msg"><p>{% trans "To use this app, sign in with your facebook account:" %}</p>
<fb:login-button show-faces="true"></fb:login-button>
</div>
</div>
</script>

<script id="show_pic_tmpl" type="text/html">
<img class="answer_picture" src="image?answer_key=${answer_key}">
</script>

<script id="show_answer_tmpl" type="text/html">
   <div class="answer_card" id="answer_${answer_key}">

    <div class="delete_answer_div">
        <form method="post" id="delete_answer_form_${answer_key}" action="/ajax.html">
            <input type="hidden" name="answer_key" value="${answer_key}">
            <input type="hidden" name="action" value="delete_answer">
<a href="#" onclick="$('#delete_answer_form_${answer_key}').submit();return false;"><b>x</b></a>
       </form>
   </div>

  <div class="card_inset">
        <div id="picture_${answer_key}"></div>
        <span class="answer_text">${answer_text}</span>
        <div id="file_uploader_${answer_key}"><noscript><p>Please enable JavaScript to use file uploader.</p><!-- or put a simple form for upload here --></noscript></div>
  </div>

    </div> <!-- answer_card-->
</script>

<script id="question_created_tmpl" type="text/html">
<div class="mytube">
<div id="question_created"> 
    <p>{% trans "Question created" %}</p>
    <div class="question_text">${question_text}</div>

    <p>{% trans "Suggest inital answers" %}</p>
    <div id="answers_form_div">
         <form id="new_answer_form" action="/ajax.html" method="get">
            <input type="hidden" name="question_key_name" value="${question_key_name}">
            <input type="hidden" name="action" value="add_answer">

            <input id="new_answer" name="answer_text" class="text" type="text" size=30>
&nbsp;<button id="new_answer" type="submit">{% trans "add" %}</button>

         </form>
    </div>

    <br />

    <div id="answers_div">
    </div>

    <div style="clear:both">
        <br /><button id="done_button" class="my_button">{% trans "done" %}</button>
        <input type="checkbox" name="post_to_fb" value="post_to_fb" checked>{% trans "Post to Facebook" %}<br>
    </div>
</div>
</div>
</script>

<script id="new_question_tmpl" type="text/html">
<div class="mytube">
    <div id="question_form_div">
        <form id="question_form" action="/ajax.html" method="get">
              <input type="hidden" name="action" value="create_question">
              <label for="question">{% trans "Enter your question" %}</label><br /><br />
<div>              <input name="question" id="question" size=45 class="text" type="text">
</div>
<br />
            <button type="submit" id="create_question_button" class="my_button">{% trans "create" %}</button>
        </form>
    </div>
</div>
</script>

<script id="done_question_tmpl" type="text/html">
<div class="mytube">
    <p>{% trans "You're done!" %}</p>
    <div class="question_text">${question_text}</div>

    <p>{% trans "Your question's URL is:" %} <a href="http://apps.facebook.com/five_votes/q${question_key_name}">http://apps.facebook.com/five_votes/q${question_key_name}</a></p>

    <button type="submit" id="create_another_button" class="my_button">{% trans "create another question" %}</button>
</div>
</script>


<script id="answer_question_tmpl" type="text/html">
<div class="mytube">
<div> 
    <div class="question_text">${question_text}</div>
<br />
    <div id="answers_div">
    </div>
<br />

    <div class="vote_link" id="add_ans_link" style="clear:both;">
      <div class="mytube">
        <a href="#" onclick="add_ans_link_func();return false;">{% trans "suggest new answer" %}</a>
      </div>
    </div>

    <div id="add_new_ans" style="clear:both;float:right;display:none;">
      <div class="mytube">
         <form id="add_new_ans_form" action="/ajax.html" method="get">
            <input type="hidden" name="question_key_name" value="${question_key_name}">
            <input type="hidden" name="action" value="add_answer">

            <input id="new_answer" name="answer_text" class="text" type="text" size=20>
&nbsp;<button id="new_answer" type="submit">{% trans "add" %}</button>
         </form>
      </div>
    </div>

    <div id="see_results_div" style="clear:both;display:none;">
        <br /><button id="see_results_button" class="my_button">{% trans "See results" %}</button>

<input type="checkbox" name="post_to_fb" value="post_to_fb" checked>{% trans "Post to Facebook" %}<br>

    </div>

</div>
</div>
</script>

<script id="suggest_another_answer_tmpl" type="text/html">
    <p>{% trans "Suggest another answer" %}</p>

    <div id="answers_form_div">
         <form id="new_answer_form" action="/ajax.html" method="get">
            <input type="hidden" name="question_key_name" value="${question_key_name}">
            <input type="hidden" name="action" value="add_answer">

            <input id="new_answer" name="answer_text" class="text" type="text" size=30>
&nbsp;<button id="new_answer" type="submit">{% trans "add" %}</button>

         </form>
    </div>
</script>

</body>
</html>


<script id="show_answer_for_voting_tmpl" type="text/html">
  <div class="answer_card" id="answer_${answer_key}">

  <div class="card_inset">
        <div id="picture_${answer_key}"></div>
        <span class="answer_text">${answer_text}</span>

    <div id="count_inset_${answer_key}" class="count_inset"><div id="count_text_${answer_key}"  class="count_text"></div></div>

    <div class="plus_vote_div">
        <form method="post" id="plus_vote_form_${answer_key}" action="/ajax.html">
            <input type="hidden" name="answer_key" value="${answer_key}">
            <input type="hidden" name="action" value="vote">
            <input type="hidden" name="vote_val" value="1">
<span class="vote_link"><a href="#" onclick="$('#plus_vote_form_${answer_key}').submit();return false;">{% trans "vote" %}</a>
       </form>
   </div>

    <div id="minus_vote_link_${answer_key}" class="minus_vote_div">
        <form method="post" id="minus_vote_form_${answer_key}" action="/ajax.html">
            <input type="hidden" name="answer_key" value="${answer_key}">
            <input type="hidden" name="action" value="vote">
            <input type="hidden" name="vote_val" value="-1">
<span class="vote_link"><a href="#" onclick="$('#minus_vote_form_${answer_key}').submit();return false;">{% trans "unvote" %}</a>
       </form>
   </div>

  </div>

  </div> <!-- answer_card-->
</script>



<script id="show_results_tmpl" type="text/html">
<div class="mytube">
<div> 
    <div class="question_text">${question_text}</div>
    <div id="selector_div">
    </div>
    <div id="result_answers_div">
    </div>
</div>    
</div>
</script>

<script id="res_selector_tmpl" type="text/html">
    <div id="selector_${id}" class="result_selector ${selected_result}"><span id="selector_text_${id}" class="${text_visible}">${text}</span><span id="selector_link_${id}" class="vote_link ${link_visible}"><a href="#" onclick="return false;">${text}</a></span></div>
</script>

<script id="show_answer_for_results_tmpl" type="text/html">
  <div class="results_card" id="answer_${answer_key}">
      <div class="results_pic" id="picture_${answer_key}"></div>
      <div class="results_text">${answer_text}</div>
      <div class="results_count_text">${num_votes} &#10003;</div>
  </div>
</script>


<script id="show_result_pic_tmpl" type="text/html">
<img class="answer_picture" width="50" height="50" src="image?answer_key=${answer_key}">
</script>


<script id="welcome_question_tmpl" type="text/html">
<div class="mytube">
  <div> 
      <div id="welcome_msg"><p>{% trans "To vote on this question, sign in with your facebook account:" %}</p> <fb:login-button show-faces="true"></fb:login-button>
      </div>
      <div class="question_text">${question_text}</div>
<br />
      <div id="answers_div">
      </div>

      <div style="clear:both;">{%trans "login to vote" %}</div>
  </div>
</div>
</script>


<script id="show_answer_for_welcome_tmpl" type="text/html">
  <div class="answer_card" id="answer_${answer_key}">
    <div class="card_inset">
          <div id="picture_${answer_key}"></div>
          <span class="answer_text">${answer_text}</span>
      <div id="count_inset_${answer_key}" class="count_inset"><div id="count_text_${answer_key}"  class="count_text"></div></div>
    </div>
  </div> <!-- answer_card-->
</script>


<script id="show_answer_for_voting_and_editing_tmpl" type="text/html">
  <div class="answer_card" id="answer_${answer_key}">

    <div class="delete_answer_div" id="del_ans_link_${answer_key}">
        <form method="post" id="delete_answer_form_${answer_key}" action="/ajax.html">
            <input type="hidden" name="answer_key" value="${answer_key}">
            <input type="hidden" name="action" value="delete_answer">
<a href="#" onclick="$('#delete_answer_form_${answer_key}').submit();return false;"><b>x</b></a>
       </form>
   </div>

   <div class="card_inset">

        <div id="picture_${answer_key}"></div>
        <span class="answer_text">${answer_text}</span>
        <div id="file_uploader_${answer_key}"><noscript><p>Please enable JavaScript to use file uploader.</p><!-- or put a simple form for upload here --></noscript></div>
    <div id="count_inset_${answer_key}" class="count_inset"><div id="count_text_${answer_key}"  class="count_text"></div></div>

    <div class="plus_vote_div">
        <form method="post" id="plus_vote_form_${answer_key}" action="/ajax.html">
            <input type="hidden" name="answer_key" value="${answer_key}">
            <input type="hidden" name="action" value="vote">
            <input type="hidden" name="vote_val" value="1">
<span class="vote_link"><a href="#" onclick="$('#plus_vote_form_${answer_key}').submit();return false;">{% trans "vote" %}</a>
       </form>
   </div>

    <div id="minus_vote_link_${answer_key}" class="minus_vote_div">
        <form method="post" id="minus_vote_form_${answer_key}" action="/ajax.html">
            <input type="hidden" name="answer_key" value="${answer_key}">
            <input type="hidden" name="action" value="vote">
            <input type="hidden" name="vote_val" value="-1">
<span class="vote_link"><a href="#" onclick="$('#minus_vote_form_${answer_key}').submit();return false;">{% trans "unvote" %}</a>
       </form>
   </div>

  </div>

  </div> <!-- answer_card-->
</script>


<script id="prev_questions_tmpl" type="text/html">
    <div class="prev_question_class">
        <div class="mytube" style="float:left;">
             <div class="question_link"><a target="_blank" href="http://apps.facebook.com/five_votes/q${question_key_name}">${question_text}</a></div>
        </div>

        <div class="mytube" style="float:right;">
            <div id="more_link_${question_key_name}" q_key="${question_key_name}" class="vote_link"><a href="#" onclick="return false;">[{% trans "open" %}]</a></div>
            <div id="less_link_${question_key_name}" q_key="${question_key_name}" class="vote_link invisible"><a href="#" onclick="return false;">[{% trans "close" %}]</a></div>
        </div>

        <div class="mytube invisible" id="prev_answers_div_${question_key_name}" style="clear:both;">
             <div id="inner_prev_answers_div_${question_key_name}"></div>
             <div style="clear:both;text-align:center;"><button class="my_button delete_question_button" q_key="${question_key_name}">{% trans "delete" %}</button></div>
       </div>
   </div>
</script>

<script id="prev_questions_header_tmpl" type="text/html">

    <div id="dialog-confirm" class="invisible" title="{% trans "Delete this question?" %}">
	<p><span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span>
        <span id="confirm_delete_question_div"></span>
</p>
    </div>

    <div style="text-align:left;margin-top:7px;">
&nbsp;&nbsp;{% trans "Your questions" %}
    </div>
</script>



<script id="show_answer_for_prev_questions_tmpl" type="text/html">
  <div class="answer_card" id="answer_${answer_key}">

    <div class="delete_answer_div" id="del_ans_link_${answer_key}">
        <form method="post" id="delete_answer_form_${answer_key}" action="/ajax.html">
            <input type="hidden" name="answer_key" value="${answer_key}">
            <input type="hidden" name="action" value="delete_answer">
<a href="#" onclick="$('#delete_answer_form_${answer_key}').submit();return false;"><b>x</b></a>
       </form>
   </div>

    <div id="count_inset_${answer_key}" class="prev_questions_count_inset"><div id="count_text_${answer_key}"  class="count_text">${num_votes} &#10003;</div></div>

   <div class="card_inset">
        <div id="picture_${answer_key}"></div>
        <span class="answer_text">${answer_text}</span>
        <div id="file_uploader_${answer_key}"><noscript><p>Please enable JavaScript to use file uploader.</p><!-- or put a simple form for upload here --></noscript></div>
   </div>

  </div> <!-- answer_card-->
</script>


<script id="all_questions_question_tmpl" type="text/html">
    <div class="prev_question_class" id="prev_question_${question_key_name}">
        <div class="mytube" style="float:left;">
             <div class="question_link"><a target="_blank" href="http://apps.facebook.com/five_votes/q${question_key_name}">${question_text}</a></div>
        </div>
    </div>
</script>

